"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[931],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),p=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},c=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,c=a(e,["components","mdxType","originalType","parentName"]),u=p(n),m=o,y=u["".concat(l,".").concat(m)]||u[m]||d[m]||i;return n?r.createElement(y,s(s({ref:t},c),{},{components:n})):r.createElement(y,s({ref:t},c))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,s=new Array(i);s[0]=u;var a={};for(var l in t)hasOwnProperty.call(t,l)&&(a[l]=t[l]);a.originalType=e,a.mdxType="string"==typeof e?e:o,s[1]=a;for(var p=2;p<i;p++)s[p]=n[p];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},6130:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return a},contentTitle:function(){return l},metadata:function(){return p},toc:function(){return c},default:function(){return u}});var r=n(7462),o=n(3366),i=(n(7294),n(3905)),s=["components"],a={sidebar_position:3},l="Create a Permission",p={unversionedId:"CRUDStories/create-a-permission",id:"CRUDStories/create-a-permission",isDocsHomePage:!1,title:"Create a Permission",description:"A permission is used to give the generator more clues about the user types, and what each user is allowed to do.",source:"@site/docs/CRUDStories/create-a-permission.md",sourceDirName:"CRUDStories",slug:"/CRUDStories/create-a-permission",permalink:"/usac/docs/CRUDStories/create-a-permission",editUrl:"https://github.com/mikerudge/user-stories-as-code/edit/main/website/docs/CRUDStories/create-a-permission.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Create a Model",permalink:"/usac/docs/CRUDStories/create-a-model"},next:{title:"Full Example",permalink:"/usac/docs/CRUDStories/full-example"}},c=[{value:"Set Deny Permission",id:"set-deny-permission",children:[],level:2},{value:"Set Owner Permission",id:"set-owner-permission",children:[],level:2},{value:"Add Permission To User Type",id:"add-permission-to-user-type",children:[],level:2},{value:"Add Permission To Models",id:"add-permission-to-models",children:[],level:2}],d={toc:c};function u(e){var t=e.components,n=(0,o.Z)(e,s);return(0,i.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"create-a-permission"},"Create a Permission"),(0,i.kt)("p",null,"A permission is used to give the generator more clues about the user types, and what each user is allowed to do."),(0,i.kt)("p",null,"UserTypes can be given default permissions, for example our admin user type should be able to ",(0,i.kt)("inlineCode",{parentName:"p"},"create")," ",(0,i.kt)("inlineCode",{parentName:"p"},"read")," ",(0,i.kt)("inlineCode",{parentName:"p"},"update")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"delete")," everything in the project so lets add that in."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"const adminReadPermission = new Permission({ userType: admin, actions: ['read'], can: true });\n")),(0,i.kt)("h2",{id:"set-deny-permission"},"Set Deny Permission"),(0,i.kt)("p",null,"All permission will default as a grant permission but you can also set them to ",(0,i.kt)("inlineCode",{parentName:"p"},"deny")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"adminUser.addPermissions({\n  actions: ['all'],\n  can: false,\n});\n")),(0,i.kt)("h2",{id:"set-owner-permission"},"Set Owner Permission"),(0,i.kt)("p",null,"The owner permission allows you to specify that only the owner of the model can do the action."),(0,i.kt)("p",null,"For example, if you want to only allow users to update their own profile"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"new Permission({ userType: admin, actions: ['read'], condition: 'owner' });\n")),(0,i.kt)("h2",{id:"add-permission-to-user-type"},"Add Permission To User Type"),(0,i.kt)("p",null,"Adding permissions to a user type is a default way to set permissions on all models. For example if you want an 'admin' who can do everything on every model."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"adminUser.addPermissions({\n  actions: ['create', 'read', 'update', 'delete'],\n});\n\n// Or you can just use 'all' as a helper\nadminUser.addPermissions({\n  actions: ['all'],\n});\n")),(0,i.kt)("h2",{id:"add-permission-to-models"},"Add Permission To Models"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"const userModel = new Model({ name: 'User' }).addPermission(new Permission({ userType: admin, actions: ['all'] }));\n")))}u.isMDXComponent=!0}}]);